# Começando com Django 

## Introdução

Este é um tutorial de introdução ao Django, um framework para desenvolvimento web em Python.

## Pré-requisitos

Para seguir este tutorial, você precisa ter o Python 3 instalado em sua máquina. Você pode baixá-lo [aqui](https://www.python.org/downloads/).

## Instalação

Para instalar o Django, você pode usar o gerenciador de pacotes do Python, o pip. Para isso, basta executar o seguinte comando:

```bash
pip install django
```

## Criando um projeto

Para criar um projeto Django, basta executar o seguinte comando:

```bash
django-admin startproject mysite
```

O comando acima irá criar uma pasta chamada `mysite` com a seguinte estrutura:

```bash
mysite/
    manage.py
    mysite/
        __init__.py
        settings.py
        urls.py
        wsgi.py
```

A pasta `mysite` é o diretório raiz do seu projeto. O arquivo `manage.py` é um utilitário que permite interagir com o projeto de diversas formas. A pasta `mysite` é o pacote Python do seu projeto. O arquivo `settings.py` contém as configurações do seu projeto. O arquivo `urls.py` contém as configurações de roteamento do seu projeto. O arquivo `wsgi.py` é um ponto de entrada para servidores web compatíveis com WSGI, como o Gunicorn.

## Rodando o servidor

Para rodar o servidor de desenvolvimento do Django, basta executar o seguinte comando:

```bash
python manage.py runserver
```

O servidor irá rodar na porta 8000 por padrão. Para rodar na porta 8080, por exemplo, basta executar o seguinte comando:

```bash
python manage.py runserver 8080
```

## Criando uma aplicação

Para criar uma aplicação Django, basta executar o seguinte comando:

```bash
python manage.py startapp polls
```

O comando acima irá criar uma pasta chamada `polls` com a seguinte estrutura:

```bash
polls/
    __init__.py
    admin.py
    apps.py
    migrations/
        __init__.py
    models.py
    tests.py
    views.py
```

A pasta `polls` é o pacote Python da sua aplicação. O arquivo `admin.py` contém as configurações do Django Admin para a sua aplicação. O arquivo `apps.py` contém as configurações da sua aplicação. A pasta `migrations` contém as migrações do seu projeto. O arquivo `models.py` contém os modelos do seu projeto. O arquivo `tests.py` contém os testes da sua aplicação. O arquivo `views.py` contém as views da sua aplicação.

## Criando um modelo

Para criar um modelo Django, basta editar o arquivo `models.py` da sua aplicação. Por exemplo, para criar um modelo `Question` com os campos `question_text` e `pub_date`, basta adicionar o seguinte código:

```python
from django.db import models

class Question(models.Model):
    question_text = models.CharField(max_length=200)
    pub_date = models.DateTimeField('date published')
```

## Criando uma migração

Para criar uma migração, basta executar o seguinte comando:

```bash
python manage.py makemigrations polls
```

O comando acima irá criar um arquivo de migração na pasta `migrations` da sua aplicação. Por exemplo, o arquivo `0001_initial.py` será criado com o seguinte conteúdo:

```python
# Generated by Django 2.2.4 on 2019-08-01 00:00

from django.db import migrations, models
import django.db.models.deletion

# This is an auto-generated Django model module.
# You'll have to do the following manually to clean this up:
#   * Rearrange models' order
#   * Make sure each model has one field with primary_key=True
#   * Make sure each ForeignKey and OneToOneField has `on_delete` set to the desired behavior
#   * Remove `managed = False` lines if you wish to allow Django to create, modify, and delete the table
# Feel free to rename the models, but don't rename db_table values or field names.

class Migration(migrations.Migration):

    initial = True

    dependencies = [
    ]

    operations = [
        migrations.CreateModel(
            name='Question',
            fields=[
                ('id', models.AutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('question_text', models.CharField(max_length=200)),
                ('pub_date', models.DateTimeField(verbose_name='date published')),
            ],
        ),
        migrations.CreateModel(
            name='Choice',
            fields=[
                ('id', models.AutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('choice_text', models.CharField(max_length=200)),
                ('votes', models.IntegerField(default=0)),
                ('question', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, to='polls.question')),
            ],
        ),
    ]
```

## Aplicando uma migração

Para aplicar uma migração, basta executar o seguinte comando:

```bash
python manage.py migrate
```

O comando acima irá criar as tabelas do seu modelo no banco de dados.

## Criando um superusuário

Para criar um superusuário, basta executar o seguinte comando:

```bash
python manage.py createsuperuser
```

O comando acima irá criar um superusuário para o Django Admin.

## Registrando um modelo no Django Admin

Para registrar um modelo no Django Admin, basta editar o arquivo `admin.py` da sua aplicação. Por exemplo, para registrar o modelo `Question`, basta adicionar o seguinte código:

```python
from django.contrib import admin

from .models import Question

admin.site.register(Question)
```

## Criando uma view

Para criar uma view Django, basta editar o arquivo `views.py` da sua aplicação. Por exemplo, para criar uma view `index`, basta adicionar o seguinte código:

```python
from django.http import HttpResponse

def index(request):
    return HttpResponse("Hello, world. You're at the polls index.")
```

## Criando uma URL

Para criar uma URL Django, basta editar o arquivo `urls.py` da sua aplicação. Por exemplo, para criar uma URL para a view `index`, basta adicionar o seguinte código:

```python
from django.urls import path

from . import views

urlpatterns = [
    path('', views.index, name='index'),
]
```

O código acima irá criar uma URL vazia para a view `index`.

## Criando uma view genérica

Para criar uma view genérica Django, basta editar o arquivo `views.py` da sua aplicação. Por exemplo, para criar uma view genérica `IndexView`, basta adicionar o seguinte código:

```python
from django.views import generic

from .models import Question

class IndexView(generic.ListView):
    template_name = 'polls/index.html'
    context_object_name = 'latest_question_list'

    def get_queryset(self):
        return Question.objects.order_by('-pub_date')[:5]
```

O código acima irá criar uma view genérica que lista as últimas 5 questões.

